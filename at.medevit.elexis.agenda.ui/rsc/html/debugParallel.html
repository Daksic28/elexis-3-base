<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8' />
	<link href='../fullcalendar.min.css' rel='stylesheet' />
	<link href='../fullcalendar.print.min.css' rel='stylesheet' media='print' />
	<link href='../lib/qTip/jquery.qtip.min.css' rel='stylesheet' />
	<script src='../lib/moment.min.js'></script>
	<script src='../lib/jquery.min.js'></script>
	<script src='../lib/qTip/jquery.qtip.min.js'></script>
	<script src='../fullcalendar.js'></script>
	<script src='../resourcegrid.js'></script>
	<script src='../fullcalendarparallel.js'></script>
	<script src='../locale-all.js'></script>
	<script>
		$(document).ready(function () {

			$('#calendar').fullCalendar({
				locale: 'de',
				defaultView: 'agendaParallel',
				currentView: 'agendaParallel',
				editable: true,
				nowIndicator: true,
				minTime: "06:00:00",
				maxTime: "23:00:00",
				slotDuration: "00:15:00",
				events: [
					{
						title: 'Meeting Anton',
						start: '2017-03-29T10:30:00',
						end: '2017-03-29T12:30:00',
						resource: 'Anton'
					},
				],
				dayClick: dayClickCallback,
				eventRender: eventRenderCallback
			});
		});

		function dayClickCallback(date, jsEvent, view) {
			if (slotDate) {
				forgetSlot();
			} else {
				console.debug(date.format());
				console.debug(jsEvent.resource);
				console.debug(view);
				slotDate = date;
				$("#calendar").on("mousemove", forgetSlot);
			}
		}

		function forgetSlot() {
			slotDate = null;
			$("#calendar").off("mousemove", forgetSlot);
		}

		var slotDate;

		function eventRenderCallback(event, element) {

			element.dblclick(function () {
				doubleClickFunction(event.id);
			});
			element.contextmenu(function () {
				contextMenuFunction(event.id);
			});
		}

	</script>
	<style>
		body {
			margin: 40px 10px;
			padding: 0;
			font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
			font-size: 14px;
		}
		
		#calendar {
			margin: 0 auto;
			width: 100%;
		}
	</style>
</head>

<body oncontextmenu="return false;">
	<div id='calendar'></div>
	<input type="button" value="Update resources" onclick="$('#calendar').fullCalendar('getView').setResourceIds(['Anton','Berta','Caesar']);"
	/>
</body>

</html>